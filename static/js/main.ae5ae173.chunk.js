(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(58)},38:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"startAddingPost",function(){return T}),n.d(a,"uploadPosts",function(){return I}),n.d(a,"startLoadingComments",function(){return L}),n.d(a,"loadComments",function(){return _}),n.d(a,"removingPosts",function(){return w}),n.d(a,"startAddingComment",function(){return B}),n.d(a,"removePosts",function(){return H}),n.d(a,"addPosts",function(){return R}),n.d(a,"addComment",function(){return U}),n.d(a,"loadPosts",function(){return z});var r=n(0),o=n.n(r),c=n(28),i=n.n(c),s=(n(38),n(64)),u=n(5),m=n(16),l=n(14),p=n(22),d=[];var f=Object(u.c)({comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return e[t.postId]?Object(p.a)({},e,Object(l.a)({},t.postId,Object(m.a)(e[t.postId]).concat([t.comment]))):Object(p.a)({},e,Object(l.a)({},t.postId,[t.comment]));default:return e;case"LOAD_COMMENTS":return t.comments}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_POST":return Object(m.a)(e.slice(0,t.index)).concat(Object(m.a)(e.slice(t.index+1)));case"ADD_POST":return Object(m.a)(e).concat([t.post]);default:return e;case"LOAD_PHOTOS":return t.posts}}}),b=n(18),h=n(7),O=n(8),v=n(10),E=n(9),j=n(11),g=n(61);var y=function(e){var t=e.post;return o.a.createElement("figure",{className:"figure"},o.a.createElement(g.a,{to:"/single/".concat(t.id)}," ",o.a.createElement("img",{className:"photo",src:t.imageLink,alt:t.description})),o.a.createElement("figcaption",null,o.a.createElement("p",null," ",t.description," ")),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{onClick:function(){e.removingPosts(e.index,t.id),e.history.push("/")}}," ","Remove"," "),o.a.createElement(g.a,{className:"comment-button",to:"/single/".concat(t.id)},o.a.createElement("div",{className:"comment-count"},o.a.createElement("div",{className:"speech-bubble"}," "),e.comments[t.id]?e.comments[t.id].length:0))))};var S=function(e){return o.a.createElement("div",null,o.a.createElement(g.a,{to:"/AddPhoto",className:"add-button"}),o.a.createElement("div",{className:"photo-grid"},e.posts.sort(function(e,t){return t.id-e.id}).map(function(t,n){return o.a.createElement(y,Object.assign({key:n,post:t},e,{index:n}))})))},k=n(12),A=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(E.a)(t).call(this))).handleSubmit=e.handleSubmit.bind(Object(k.a)(Object(k.a)(e))),e}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.elements.link.value,n=e.target.elements.description.value,a={id:Number(new Date),description:n,imageLink:t};n&&t&&(this.props.startAddingPost(a),this.props.onHistory.push("/"))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,"Upload to Gallery"),";",o.a.createElement("div",{className:"form"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",placeholder:"Link",name:"link"}),o.a.createElement("input",{type:"text",placeholder:"description",name:"description"}),o.a.createElement("button",null,"Upload"))))}}]),t}(r.Component),D=n(62),N=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(E.a)(t).call(this))).handleSubmit=e.handleSubmit.bind(Object(k.a)(Object(k.a)(e))),e}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.elements.comment.value;this.props.startAddingComment(t,this.props.id),e.target.elements.comment.value=""}},{key:"render",value:function(){return o.a.createElement("div",{className:"comment"},this.props.comments.map(function(e,t){return o.a.createElement("p",{key:t},e)}),o.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",placeholder:"comment",name:"comment"}),o.a.createElement("input",{type:"submit",hidden:!0})))}}]),t}(r.Component),C=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.match,n=e.posts,a=Number(t.params.id),r=n.find(function(e){return e.id===a}),c=this.props.comments[t.params.id]||[],i=this.props.posts.findIndex(function(e){return e.id===a});return o.a.createElement("div",{className:"single-photo"},o.a.createElement(y,Object.assign({post:r},this.props,{index:i})),o.a.createElement(N,{startAddingComment:this.props.startAddingComment,comments:c,id:a}))}}]),t}(r.Component),P=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.uploadPosts(),this.props.startLoadingComments()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,o.a.createElement(g.a,{to:"/"},"Socio-Gallery")),o.a.createElement(D.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",null,o.a.createElement(S,e.props))}}),o.a.createElement(D.a,{path:"/AddPhoto",render:function(t){var n=t.history;return o.a.createElement(A,Object.assign({},e.props,{onHistory:n}))}}),o.a.createElement(D.a,{path:"/single/:id",render:function(t){return o.a.createElement(C,Object.assign({},e.props,t))}}))}}]),t}(r.Component),x=n(24);x.initializeApp({apiKey:"AIzaSyBYOTnoEp3VUzGFBb1pancBus-bJt5DjnY",authDomain:"socioapp-e1362.firebaseapp.com",databaseURL:"https://socioapp-e1362.firebaseio.com",projectId:"socioapp-e1362",storageBucket:"socioapp-e1362.appspot.com",messagingSenderId:"893891613780"});var M=x.database();function T(e){return function(t){return M.ref("posts").update(Object(l.a)({},e.id,e)).then(function(){t(R(e))}).catch(function(e){console.log(e)})}}function I(e){return function(e){return M.ref("posts").once("value").then(function(t){var n=[];t.forEach(function(e){n.push(e.val())}),e(z(n))})}}function L(){return function(e){return M.ref("comment").once("value").then(function(t){var n={};t.forEach(function(e){n[e.key]=Object.values(e.val())}),e(_(n))})}}function _(e){return{type:"LOAD_COMMENTS",comments:e}}function w(e,t){return function(n){return M.ref("posts/".concat(t)).remove().then(function(){n(H(e))})}}function B(e,t){return function(n){return M.ref("comment/"+t).push(e).then(function(){n(U(e,t))}).catch(function(e){console.log(e)})}}function H(e){return{type:"REMOVE_POST",index:e}}function R(e){return{type:"ADD_POST",post:e}}function U(e,t){return{type:"ADD_COMMENT",comment:e,postId:t}}function z(e){return{type:"LOAD_PHOTOS",posts:e}}var G=n(63);var J=Object(G.a)(Object(b.b)(function(e){return{posts:e.posts,comments:e.comments}},function(e){return Object(u.b)(a,e)})(P)),V=n(32),Y=Object(u.d)(f,Object(u.a)(V.a));i.a.render(o.a.createElement(b.a,{store:Y},o.a.createElement(s.a,null,o.a.createElement(J,null))),document.getElementById("root"))}},[[33,2,1]]]);
//# sourceMappingURL=main.ae5ae173.chunk.js.map